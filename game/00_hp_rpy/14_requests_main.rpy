label __init_variables:
    if not hasattr(renpy.store,'hg_pf_TalkToMe_OBJ'): #important!
        $ hg_pf_TalkToMe_OBJ = personal_favor(
            imagination_level = 0,
            max_heart_level = 3,
            menu_text = "Talk to me",
            start_label = "hg_pf_TalkToMe",
            costume_event = True
        )
    else:
        $ hg_pf_TalkToMe_OBJ.max_heart_level = 3
        
    if not hasattr(renpy.store,'hg_pf_NicePanties_OBJ'): #important!
        $ hg_pf_NicePanties_OBJ = personal_favor(    
            imagination_level = 0,
            max_heart_level = 3,
            menu_text = "Nice panties",
            start_label = "hg_pf_NicePanties"
        )
    else:
        $ hg_pf_NicePanties_OBJ.max_heart_level = 3
        
    if not hasattr(renpy.store,'hg_pf_BreastMolester_OBJ'): #important!
        $ hg_pf_BreastMolester_OBJ = personal_favor(
            imagination_level = 2,
            max_heart_level = 3,
            menu_text = "Breast molester",
            start_label = "hg_pf_BreastMolester",
            costume_event = True
        )
    else:
        $ hg_pf_BreastMolester_OBJ.max_heart_level = 3
        
    if not hasattr(renpy.store,'hg_pf_ButtMolester_OBJ'): #important!
        $ hg_pf_ButtMolester_OBJ = personal_favor(
            imagination_level = 2,
            max_heart_level = 3,
            menu_text = "Butt molester",
            start_label = "hg_pf_ButtMolester",
            costume_event = True
        )
    else:
        $ hg_pf_ButtMolester_OBJ.max_heart_level = 3
        
    if not hasattr(renpy.store,'hg_pf_ShowThemToMe_OBJ'): #important!
        $ hg_pf_ShowThemToMe_OBJ = personal_favor(
            imagination_level = 3,
            max_heart_level = 3,
            menu_text = "Show them to me!",
            start_label = "hg_pf_ShowThemToMe",
            costume_event = True
        )
    else:
        $ hg_pf_ShowThemToMe_OBJ.max_heart_level = 3
        
    if not hasattr(renpy.store,'hg_pf_DanceForMe_OBJ'): #important!
        $ hg_pf_DanceForMe_OBJ = personal_favor(
            imagination_level = 3,
            max_heart_level = 3,
            menu_text = "Dance for me!",
            start_label = "hg_pf_DanceForMe",
            costume_event = True
        )
    else:
        $ hg_pf_DanceForMe_OBJ.max_heart_level = 3
        
    if not hasattr(renpy.store,'hg_pf_ShowMeYourAss_OBJ'): #important!
        $ hg_pf_ShowMeYourAss_OBJ = personal_favor(
            imagination_level = 3,
            max_heart_level = 3,
            menu_text = "Show me that ass!",
            start_label = "hg_pf_ShowMeYourAss",
            costume_event = False
        )
    else:
        $ hg_pf_ShowMeYourAss_OBJ.max_heart_level = 3
        
    if not hasattr(renpy.store,'hg_pf_LetMeTouchThem_OBJ'): #important!
        $ hg_pf_LetMeTouchThem_OBJ = personal_favor(
            imagination_level = 3,
            max_heart_level = 3,
            menu_text = "Let me touch them!",
            start_label = "hg_pf_LetMeTouchThem",
            costume_event = True
        )
    else:
        $ hg_pf_LetMeTouchThem_OBJ.max_heart_level = 3
        
    if not hasattr(renpy.store,'hg_pf_TouchYourself_OBJ'): #important!
        $ hg_pf_TouchYourself_OBJ = personal_favor(
            imagination_level = 4,
            max_heart_level = 3,
            menu_text = "Touch Yourself!",
            start_label = "hg_pf_TouchYourself",
            costume_event = False
        )
    else:
        $ hg_pf_TouchYourself_OBJ.max_heart_level = 3
        
    if not hasattr(renpy.store,'hg_pf_TouchMe_OBJ'): #important!
        $ hg_pf_TouchMe_OBJ = personal_favor(
            imagination_level = 4,
            max_heart_level = 3,
            menu_text = "Touch me!",
            start_label = "hg_pf_TouchMe",
            costume_event = True
        )
    else:
        $ hg_pf_TouchMe_OBJ.max_heart_level = 3
        
    if not hasattr(renpy.store,'hg_pf_TitJob_OBJ'): #important!
        $ hg_pf_TitJob_OBJ = personal_favor(
            imagination_level = 4,
            max_heart_level = 3,
            menu_text = "Let me fuck them!",
            start_label = "hg_pf_TitJob",
            costume_event = True
        )
    else:
        $ hg_pf_TitJob_OBJ.max_heart_level = 3
        
    if not hasattr(renpy.store,'hg_pf_SuckIt_OBJ'): #important!
        $ hg_pf_SuckIt_OBJ = personal_favor(
            imagination_level = 4,
            max_heart_level = 4,
            menu_text = "Suck it!",
            start_label = "hg_pf_SuckIt",
            costume_event = True
        )
    else:
        $ hg_pf_SuckIt_OBJ.max_heart_level = 4
    
    if not hasattr(renpy.store,'hg_pf_LetsHaveSex_OBJ'): #important!
        $ hg_pf_LetsHaveSex_OBJ = personal_favor(
            imagination_level = 5,
            max_heart_level = 3,
            menu_text = "Let's have sex!",
            start_label = "hg_pf_LetsHaveSex",
            costume_event = True
        )
    else:
        $ hg_pf_LetsHaveSex_OBJ.max_heart_level = 3
           
    if not hasattr(renpy.store,'hg_pf_TimeForAnal_OBJ'): #important!
        $ hg_pf_TimeForAnal_OBJ = personal_favor(
            imagination_level = 5,
            max_heart_level = 3,
            menu_text = "Time for anal!",
            start_label = "hg_pf_TimeForAnal",
            costume_event = True
        )
    else:
        $ hg_pf_TimeForAnal_OBJ.max_heart_level = 3
    
    
    $ hg_pf_list = []
    $ hg_pf_list.append(hg_pf_TalkToMe_OBJ)
    $ hg_pf_list.append(hg_pf_NicePanties_OBJ)
    $ hg_pf_list.append(hg_pf_BreastMolester_OBJ)
    $ hg_pf_list.append(hg_pf_ButtMolester_OBJ)
    $ hg_pf_list.append(hg_pf_ShowThemToMe_OBJ)
    $ hg_pf_list.append(hg_pf_DanceForMe_OBJ)
    $ hg_pf_list.append(hg_pf_ShowMeYourAss_OBJ)
    $ hg_pf_list.append(hg_pf_LetMeTouchThem_OBJ)
    $ hg_pf_list.append(hg_pf_TouchMe_OBJ)
    $ hg_pf_list.append(hg_pf_TitJob_OBJ)
    $ hg_pf_list.append(hg_pf_TouchYourself_OBJ)
    $ hg_pf_list.append(hg_pf_SuckIt_OBJ)
    $ hg_pf_list.append(hg_pf_LetsHaveSex_OBJ)
    $ hg_pf_list.append(hg_pf_TimeForAnal_OBJ)
    
    
    
    if not hasattr(renpy.store,'hg_pr_FlirtClassmate_OBJ'): #important!
        $ hg_pr_FlirtClassmate_OBJ = public_request()
    $ hg_pr_FlirtClassmate_OBJ.imagination_level = 0
    $ hg_pr_FlirtClassmate_OBJ.menu_text = "She's a flirt"
    $ hg_pr_FlirtClassmate_OBJ.start_label = "hg_pr_FlirtClassmate"
    $ hg_pr_FlirtClassmate_OBJ.complete_label = "hg_pr_FlirtClassmate_complete"
    
    if not hasattr(renpy.store,'hg_pr_FlirtTeacher_OBJ'): #important!
        $ hg_pr_FlirtTeacher_OBJ = public_request()
    $ hg_pr_FlirtTeacher_OBJ.imagination_level = 2
    $ hg_pr_FlirtTeacher_OBJ.menu_text = "She's bait"
    $ hg_pr_FlirtTeacher_OBJ.start_label = "hg_pr_FlirtTeacher"
    $ hg_pr_FlirtTeacher_OBJ.complete_label = "hg_pr_FlirtTeacher_complete"
    
    if not hasattr(renpy.store,'hg_pr_ClassmateTouchYou_OBJ'): #important!
        $ hg_pr_ClassmateTouchYou_OBJ = public_request()
    $ hg_pr_ClassmateTouchYou_OBJ.imagination_level = 3
    $ hg_pr_ClassmateTouchYou_OBJ.menu_text = "Let a classmate molest you"
    $ hg_pr_ClassmateTouchYou_OBJ.start_label = "hg_pr_ClassmateTouchYou"
    $ hg_pr_ClassmateTouchYou_OBJ.complete_label = "hg_pr_ClassmateTouchYou_complete"
    
    if not hasattr(renpy.store,'hg_pr_FlashClassmate_OBJ'): #important!
        $ hg_pr_FlashClassmate_OBJ = public_request()
    $ hg_pr_FlashClassmate_OBJ.imagination_level = 3
    $ hg_pr_FlashClassmate_OBJ.menu_text = "Flash your tits to a classmate"
    $ hg_pr_FlashClassmate_OBJ.start_label = "hg_pr_FlashClassmate"
    $ hg_pr_FlashClassmate_OBJ.complete_label = "hg_pr_FlashClassmate_complete"
    
    if not hasattr(renpy.store,'hg_pr_KissAGirl_OBJ'): #important!
        $ hg_pr_KissAGirl_OBJ = public_request()
    $ hg_pr_KissAGirl_OBJ.imagination_level = 4
    $ hg_pr_KissAGirl_OBJ.menu_text = "Kiss a girl."
    $ hg_pr_KissAGirl_OBJ.start_label = "hg_pr_KissAGirl"
    $ hg_pr_KissAGirl_OBJ.complete_label = "hg_pr_KissAGirl_complete"
    
    if not hasattr(renpy.store,'hg_pr_HandjobClassmate_OBJ'): #important!
        $ hg_pr_HandjobClassmate_OBJ = public_request()
    $ hg_pr_HandjobClassmate_OBJ.imagination_level = 4
    $ hg_pr_HandjobClassmate_OBJ.menu_text = "Give a handjob to a classmate"
    $ hg_pr_HandjobClassmate_OBJ.start_label = "hg_pr_HandjobClassmate"
    $ hg_pr_HandjobClassmate_OBJ.complete_label = "hg_pr_HandjobClassmate_complete"
    
    if not hasattr(renpy.store,'hg_pr_BlowjobClassmate_OBJ'): #important!
        $ hg_pr_BlowjobClassmate_OBJ = public_request()
    $ hg_pr_BlowjobClassmate_OBJ.imagination_level = 5
    $ hg_pr_BlowjobClassmate_OBJ.menu_text = "Give a blowjob to a classmate"
    $ hg_pr_BlowjobClassmate_OBJ.start_label = "hg_pr_BlowjobClassmate"
    $ hg_pr_BlowjobClassmate_OBJ.complete_label = "hg_pr_BlowjobClassmate_complete"
    
    if not hasattr(renpy.store,'hg_pr_SexWithClassmate_OBJ'): #important!
        $ hg_pr_SexWithClassmate_OBJ = public_request()
    $ hg_pr_SexWithClassmate_OBJ.imagination_level = 5
    $ hg_pr_SexWithClassmate_OBJ.menu_text = "Have sex with a classmate"
    $ hg_pr_SexWithClassmate_OBJ.start_label = "hg_pr_SexWithClassmate"
    $ hg_pr_SexWithClassmate_OBJ.complete_label = "hg_pr_SexWithClassmate_complete"
    
    $ hg_pr_list = []
    $ hg_pr_list.append(hg_pr_FlirtClassmate_OBJ)
    $ hg_pr_list.append(hg_pr_FlirtTeacher_OBJ)
    $ hg_pr_list.append(hg_pr_ClassmateTouchYou_OBJ)
    $ hg_pr_list.append(hg_pr_FlashClassmate_OBJ)
    $ hg_pr_list.append(hg_pr_KissAGirl_OBJ)
    $ hg_pr_list.append(hg_pr_HandjobClassmate_OBJ)
    $ hg_pr_list.append(hg_pr_BlowjobClassmate_OBJ)
    $ hg_pr_list.append(hg_pr_SexWithClassmate_OBJ)
    
    
    
    if not hasattr(renpy.store,'hg_ps_PantyThief_OBJ'): #important!
        $ hg_ps_PantyThief_OBJ = public_shaming()
    $ hg_ps_PantyThief_OBJ.menu_text = "Panty Theif"
    $ hg_ps_PantyThief_OBJ.start_label = "hg_ps_PantyThief"
    $ hg_ps_PantyThief_OBJ.complete_label = "hg_ps_PantyThief_complete"
    
    if not hasattr(renpy.store,'hg_ps_WalkOfShame_OBJ'): #important!
        $ hg_ps_WalkOfShame_OBJ = public_shaming()
    $ hg_ps_WalkOfShame_OBJ.menu_text = "Walk Of Shame"
    $ hg_ps_WalkOfShame_OBJ.start_label = "hg_ps_WalkOfShame"
    $ hg_ps_WalkOfShame_OBJ.complete_label = "hg_ps_WalkOfShame_complete"
    
    if not hasattr(renpy.store,'hg_ps_WearMyCum_OBJ'): #important!
        $ hg_ps_WearMyCum_OBJ = public_shaming()
    $ hg_ps_WearMyCum_OBJ.menu_text = "Wear My Cum"
    $ hg_ps_WearMyCum_OBJ.start_label = "hg_ps_WearMyCum"
    $ hg_ps_WearMyCum_OBJ.complete_label = "hg_ps_WearMyCum_complete"

    if not hasattr(renpy.store,'hg_ps_HiddenBlowjob_OBJ'): #important!
        $ hg_ps_HiddenBlowjob_OBJ = public_shaming()
    $ hg_ps_HiddenBlowjob_OBJ.menu_text = "Hidden Blowjob"
    $ hg_ps_HiddenBlowjob_OBJ.start_label = "hg_ps_HiddenBlowjob"
    $ hg_ps_HiddenBlowjob_OBJ.complete_label = "hg_ps_HiddenBlowjob_complete"
    
    if not hasattr(renpy.store,'hg_ps_LeashWalk_OBJ'): #important!
        $ hg_ps_LeashWalk_OBJ = public_shaming()
    $ hg_ps_LeashWalk_OBJ.menu_text = "Time for a walk (leash)"
    $ hg_ps_LeashWalk_OBJ.start_label = "hg_ps_LeashWalk"
    $ hg_ps_LeashWalk_OBJ.complete_label = "hg_ps_LeashWalk_complete"

    if not hasattr(renpy.store,'hg_ps_Buttplug_OBJ'): #important!
        $ hg_ps_Buttplug_OBJ = public_shaming()
    $ hg_ps_Buttplug_OBJ.menu_text = "Wear A Buttplug"
    $ hg_ps_Buttplug_OBJ.start_label = "hg_ps_Buttplug"
    $ hg_ps_Buttplug_OBJ.complete_label = "hg_ps_Buttplug_complete"
    
    
    $ hg_ps_list = []
    $ hg_ps_list.append(hg_ps_PantyThief_OBJ)
    #$ hg_ps_list.append(hg_ps_WalkOfShame_OBJ)
    $ hg_ps_list.append(hg_ps_Buttplug_OBJ)
    $ hg_ps_list.append(hg_ps_WearMyCum_OBJ)
    #$ hg_ps_list.append(hg_ps_HiddenBlowjob_OBJ)
    #$ hg_ps_list.append(hg_ps_LeashWalk_OBJ)

    return
    
    
label silver_requests:
    if slytherin > gryffindor or slytherin == gryffindor:
        show screen hermione_main
        $ menu_x = 0.2 #Default: 0.5
        
        label silver_requests_root:
        menu:
            "-Personal favours-":
                label not_now_pf:
                python:
                    pf_menu = []
                    for i in hg_pf_list:
                        if i.imagination_level > imagination:
                            pf_menu.append(("{color=#858585}-A vague idea-{/color}","vague"))
                        else:
                            pf_menu.append((i.getMenuText(),i.start_label))
                    pf_menu.append(("-Never mind-", "nvm"))
                    result = renpy.display_menu(pf_menu)
                if result == "nvm":
                    jump silver_requests_root
                elif result == "vague":
                    call vague_idea
                    jump not_now_pf
                else:
                    $ renpy.jump(result)
                
            "{color=#858585}-Public requests-{/color}" if not daytime:
                show screen blktone
                with d3
                ">Public requests are available during the daytime only."
                hide screen blktone
                with d3
                jump silver_requests_root
            "-Public requests-" if daytime:
                if lock_public_favors:
                    her "Em... [genie_name]..."
                    her "I do not mind to keep selling you the favours..."
                    her "But only as long as we keep them private..."
                    jump silver_requests_root
                else:
                    label not_now_pr:
                    python:
                        pr_menu = []
                        for i in hg_pr_list:
                            if i.imagination_level > imagination:
                                pr_menu.append(("{color=#858585}-A vague idea-{/color}","vague"))
                            else:
                                pr_menu.append((i.getMenuText(),i.start_label))
                        pr_menu.append(("-Never mind-", "nvm"))
                        result = renpy.display_menu(pr_menu)
                    if result == "nvm":
                        jump silver_requests_root
                    elif result == "vague":
                        call vague_idea
                        jump not_now_pr
                    else:
                        $ renpy.jump(result)
                        
            "{color=#858585}-Public Shaming-{/color}" if not daytime:
                show screen blktone
                with d3
                ">Public Shaming events are available during the daytime only."
                hide screen blktone
                with d3
                jump silver_requests_root
            "-Public Shaming-"if daytime:
                label not_now_ps:
                python:
                    ps_menu = []
                    for i in hg_ps_list:
                        ps_menu.append((i.getMenuText(),i.start_label))
                    ps_menu.append(("-Never mind-", "nvm"))
                    result = renpy.display_menu(ps_menu)
                if result == "nvm":
                    jump silver_requests_root
                else:
                    $ renpy.jump(result)
            
            "{color=#858585}-Potions-{/color}" if not daytime:
                call cust_excuse("Potions are available during the daytime only.")
                jump silver_requests_root
            "-Potions-" if daytime:
                label request_potion_menu:
                python:
                    potion_menu = []
                    for potion in potion_lib.getRequests():
                        if potion_inv.has(potion):
                            potion_menu.append(("-"+potion.effect+"-",potion))
                        else:
                            pass # uncomment and remove pass to show items they player does not have greyed out
                            #potion_menu.append(("{color=#858585}-\""+potion.effect+"\"-{/color}","missing"))
                    potion_menu.append(("-Never mind-", "nvm"))
                    PotionOBJ = renpy.display_menu(potion_menu)
                if isinstance(PotionOBJ, silver_potion):
                    $ potion_inv.remove(PotionOBJ)
                    $ renpy.jump(PotionOBJ.start_label)
                if PotionOBJ == "missing":
                    m "I don't have this potion..."
                if PotionOBJ == "nvm":
                    pass
                jump silver_requests
                        
            "-Never mind-":
                jump day_time_requests
            
    else:
        her "The Gryffindors are in the lead. I don't need to do this."
        jump day_time_requests
    
label end_hg_pf_old:
    $ renpy.play('sounds/door.mp3') #Sound of a door.
    with Dissolve(.3)
    
    if daytime:
        play music "music/Brittle Rille.mp3" fadein 1 fadeout 1 # DAY MUSIC
        $ hermione_takes_classes = True
        jump day_main_menu
    else:
        play music "music/Music for Manatees.mp3" fadein 1 fadeout 1 # NIGHT MUSIC
        $ hermione_sleeping = True
        jump night_main_menu
    
    
label end_hg_pf:
    hide screen blkfade
    hide screen bld1
    hide screen hermione_main
    hide screen blktone 
    hide screen chair_02
    hide screen hermione_blink
    hide screen jerking_off_01 #Hermione topless. Genie jerking off.
    hide screen ctc
    show screen genie
    with d3
    
    call her_walk(400,610,2)
    $ renpy.play('sounds/door.mp3') #Sound of a door.
    with Dissolve(.3)
    
    if daytime:
        play music "music/Brittle Rille.mp3" fadein 1 fadeout 1 # DAY MUSIC
        $ hermione_takes_classes = True
        jump day_main_menu
    else:
        play music "music/Music for Manatees.mp3" fadein 1 fadeout 1 # NIGHT MUSIC
        $ hermione_sleeping = True
        jump night_main_menu
    
label could_not_flirt: #Sent here when choose "Favour failed! No points for you!" (Hermione is leaving without getting any points).
    hide screen blkfade
    hide screen bld1
    hide screen hermione_main
    hide screen blktone 
    hide screen chair_02
    hide screen hermione_blink
    hide screen jerking_off_01 #Hermione topless. Genie jerking off.
    hide screen ctc
    show screen genie
    with d3
    
    call her_walk(400,610,2)
    $ renpy.play('sounds/door.mp3') #Sound of a door opening.
    with Dissolve(.3)
    
    if daytime:
        play music "music/Brittle Rille.mp3" fadein 1 fadeout 1 # DAY MUSIC
        $ hermione_takes_classes = True
    else:
        play music "music/Music for Manatees.mp3" fadein 1 fadeout 1 # NIGHT MUSIC
        $ hermione_sleeping = True
    return
    
label could_not_flirt_02: #Sent here when chose "Favour failed! No points for you!"
    hide screen bld1
    hide screen hermione_main
    hide screen blktone 
    hide screen hermione_blink
    hide screen ctc
    with d3
    
    call her_walk(400,610,2)
    
    $ renpy.play('sounds/door.mp3') #Sound of a door opening.
    with Dissolve(.3)
    
    $ hermione_sleeping = True
    return   
    
    
### MUSIC BLOCK ###
label music_block:
    if daytime:
        play music "music/Brittle Rille.mp3" fadein 1 fadeout 1 # DAY MUSIC
    else:
        play music "music/Music for Manatees.mp3" fadein 1 fadeout 1 # NIGHT MUSIC
    return
    
### YOU LUCK IMAGINATION ###
label vague_idea:
    show screen blktone8
    ">You lack imagination for an idea of this caliber."
    hide screen blktone8
    return
    
### ALL THE SCREAMS ABOUT RAPE ###
label screams_of_rapings:
    call her_head("NO! What have you done!!?","head_exp/10")
    ">Hermione gives you an unexpectedly strong shove..."
    with hpunch
    call her_head("Why would you do this to me, [genie_name]...?","head_exp/10")
    call her_head("I never agreed to... to...","head_exp/27")
    call her_head("You... you...","head_exp/27")
    with hpunch
    call her_head("{size=+7}YOU RAPED ME!{/size}","head_exp/29")
    g4 "What? Don't be ridiculous, [hermione_name]! I did no such thing!"
    call her_head("Yes you did! Yes you did!","head_exp/29")
    g4 "I most certainly did not!"
    call her_head("No, you did, [genie_name]!","head_exp/29")
    call her_head("Now, you will give me 20--","head_exp/31")
    call her_head("No, 100 house points or I am reporting you to the Ministry of magic!","head_exp/31")
    menu:
        m "(Ah, crap...)"
        "\"Alright, alright... 100 points it is...\"":
            $ gryffindor +=100
            m "One hundred points to \"Gryffindor\" !"
            m "There, it is done..."
            m "Now would you calm yourself down, [hermione_name]?"
            call her_head("No, I will not!","head_exp/29")
            call her_head("I've just been raped!","head_exp/29")
            g4 "Oh, snap out of it [hermione_name], I didn't rape you! All I did was--"
            with hpunch
            call her_head("{size=+7}You raped me!!!{/size}","head_exp/29")
            g4 "By the great desert sands, would you keep it down about the rapes!?"
            g4  "Someone may hear you!"
            call her_head("Good! I want them to hear!","head_exp/29")
            m "Why would you want that? I already paid you!"
            call her_head("Oh... right...","head_exp/32")
            call her_head("But I hate you! I hate you [genie_name]!","head_exp/33")
            $ mad +=30

        "\"You're bluffing, [hermione_name]!\"":
            call her_head("No, I'm not! I'm gonna do it!","head_exp/29")
            g4 "By all means, go ahead..."
            g4 "There was no rape!"
            call her_head("I hate you, [genie_name]!","head_exp/29")
            $ mad +=50


    hide screen bld1
    hide screen ctc
    hide screen hermione_main
    show screen genie
    hide screen groping_01
    hide screen groping_02
    hide screen blkfade
    hide screen blktone8
    with Dissolve(.3)
    
    call her_walk(400,610,2)
    show screen hermione_stand_f #Hermione stands still.
    with d3

    if whoring >= 3 and whoring <= 5: #First level. Not happy.
        call her_head("...........................","head_exp/12")
        
        
    hide screen hermione_stand_f #Hermione stands still.
    $ renpy.play('sounds/door.mp3') #Sound of a door opening.
    with d3
    pause.5

    if daytime:
        $ hermione_takes_classes = True
        jump day_main_menu
    else:
        $ hermione_sleeping = True
        jump night_main_menu        
    
### SCREAM OF PLEASURES ###        
label screams_of_pleasure:
    call her_head("Ah....","head_exp/34")
    call her_head("It's inside of me...")
    call her_head("No, [genie_name], you must stop now...","head_exp/18")
    m "Why? You don't like it?"
    call her_head("It doesn't matter whether I like this or not, [genie_name].")
    call her_head("You know why I'm doing this...")
    call her_head("And it is wrong for me to let you do this to me for a meagre 15 points...")
    ">Hermione pulls away from you..."
    m "Heh... I see..."
    m "Well, in that case..."
    jump ending_of_screams_of_pleasure
    
    
label Day_Request_Block:
    
    if hg_pr_SexWithClassmate_AltFlag:#Hermione does not show up. This sends to label where she shows up next morning.
        call hg_pr_SexWithClassmate_Alt
    
    return
    
label Night_Request_Block:
    ###JOBS###
    if current_job == 1:
        jump maid_responses

    if current_job == 2:
        jump barmaid_responses

    if current_job == 3:
        jump gryffindor_cheer_responses

    if current_job == 4:
        jump slytherin_cheer_responses

    if ears == True:
        jump potion_scene_1_2

    if transparency < 1 and transparent_quest:
        jump potion_scene_4_2

    if addicted == True:
        jump potion_scene_3_2
    
    
    if hg_pf_TheGamble_Flag and hg_pf_TheGamble_FlagC or hg_pf_TheGamble_FlagA:
        jump hg_pf_TheGamble_complete
    
    python:
        for i in hg_pr_list: #Call any public request event if it's in progress
            if i.inProgress:
                renpy.call(i.complete_label)
        for i in hg_ps_list: #Call any public shaming event if it's in progress
            if i.inProgress:
                renpy.call(i.complete_label)
    return
    
label cum_block:
    show screen white 
    pause.1
    hide screen white
    pause.2
    show screen white 
    pause.1
    hide screen white
    with hpunch
    return
    
#############This massage shows when you make a request, and Hermione refuses because she is not slutty enough yet.
label too_much:
    stop music fadeout 2.0
    call her_main("[genie_name]??!","body_48",xpos=120)
    her "How could you ask for such a thing!?"
    call her_main("I think I better leave.","body_34",xpos=120)
    
    $ mad += 7
    
    hide screen blktone
    hide screen bld1
    hide screen hermione_main
    hide screen hermione_stand_f #Hermione stands still.
    with d3
    
    call her_walk(400,610,2)
    
    call reset_hermione_main
    jump end_hg_pf

label very_no:
    stop music fadeout 2.0
    call her_main("Absolutely not!","body_12",xpos=120)
    her "I'll show you that my integrity and honour as a Gryffindor cannot be bought!"
    call her_main("I'm leaving this instant.","body_30",xpos=120)
    
    $ mad += 7
    
    hide screen blktone
    hide screen bld1
    hide screen hermione_main
    hide screen hermione_stand_f #Hermione stands still.
    with d3
    
    call her_walk(400,610,2)
    
    call reset_hermione_main
    jump end_hg_pf
    
    
init python:
    class silver_request(object):
        menu_text = ""
        start_label = ""
        complete_label = ""
        points = 0
        
        
    class personal_favor(silver_request):
        hearts_level = 0
        max_heart_level = 0
        imagination_level = 0
        costume_event = False
        
        def __init__(self, **kwargs):
            self.__dict__.update(**kwargs)
        
        def getMenuText(self):
            empty_heart = "interface/empty_heart.png"
            full_heart = "interface/full_heart.png"
            ret_str = "Favor: \""+self.menu_text+"\""
            for x in range(0, self.max_heart_level):
                if x < self.hearts_level:
                    ret_str +=  "{image="+full_heart+"}"
                else:
                    ret_str +=  "{image="+empty_heart+"}"
            if self.costume_event:
               ret_str += "  {image=interface/clothes.png}"
            return ret_str
        
    class public_request(silver_request):
        imagination_level = 0
        complete = False
        inProgress = False
        
        def getMenuText(self):
            menu_image = "interface/check_"+str(self.complete)+".png"
            return "Favour: \""+self.menu_text+"\" {image="+menu_image+"}"
        
    class public_shaming(silver_request):
        complete = False
        inProgress = False
        
        def getMenuText(self):
            menu_image = "interface/check_"+str(self.complete)+".png"
            return "Event: "+self.menu_text+" {image="+menu_image+"}"
    